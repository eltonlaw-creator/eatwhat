<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ä»Šå¤©åƒå•¥</title>
  <style>
    body { font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"PingFang SC","Microsoft Yahei",sans-serif; background:#fff7ee; margin:0; color:#0f172a; }
    .stage { width:min(560px,92vw); margin:28px auto 10px; position:relative; }
    canvas#wheel { width:100%; aspect-ratio:1/1; background:#fff; border-radius:50%; border:8px solid #e5e7eb; display:block; }
    /* æŒ‡é’ˆåœ¨12ç‚¹æ–¹å‘ï¼Œå°–ç«¯æœä¸‹ */
    .pointer { position:absolute; top:-28px; left:50%; transform:translateX(-50%); width:0; height:0; border-left:18px solid transparent; border-right:18px solid transparent; border-top:32px solid #ef4444; }
    .controls { text-align:center; margin-top: 12px; }
    button { margin: 6px; padding: 10px 18px; font-size: 16px; border:0; border-radius:10px; cursor:pointer; color:#fff; background:linear-gradient(135deg,#ffa7c8,#ff8fab); box-shadow:0 6px 16px rgba(255,143,171,.35);} 
    button.alt{ background:linear-gradient(135deg,#93c5fd,#a7f3d0);} 
    #result { text-align:center; font-size:32px; font-weight:900; margin-top:12px; color:#111827; }
    #itemList { display:flex; flex-wrap:wrap; gap:6px; margin:16px auto; width:min(560px,92vw); justify-content:center; }
    .tag { background:#f8fafc; padding:6px 10px; border-radius:8px; border:1px solid #e2e8f0; }
    footer { text-align:center; margin:16px; color:#334155; font-size:12px; }
    #confetti { position:fixed; inset:0; pointer-events:none; }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>

  <div class="stage">
    <i class="pointer"></i>
    <canvas id="wheel" width="700" height="700"></canvas>
  </div>
  <div class="controls">
    <button id="spinBtn">å¼€å§‹è½¬ï¼</button>
    <button id="refreshBtn" class="alt">æ¢ä¸€æ‰¹(10)</button>
  </div>
  <div id="result">ç‚¹å‡»å¼€å§‹è½¬ï¼</div>
  <div class="hint" style="text-align:center;color:#64748b;font-size:13px">ç‚¹å‡»â€œæ¢ä¸€æ‰¹(10)â€å¯é‡æŠ½ã€‚</div>
  <div id="itemList"></div>
  <footer>Created by Elton</footer>

<script>
const defaultPool = [
  // â€”â€” æœ¬åœ°ç¾é£Ÿ 70% (çº¦ 140 é“) â€”â€”
  "ç‚’ç²¿æ¡ Char Kway Teow","æ§ŸåŸè™¾é¢ Penang Prawn Mee","ç¦å»ºé¢ KL Hokkien Mee","äº‘åé¢ Wantan Mee","å¹²æé¢ Dry Tossed Noodles",
  "ç ‚ç…²é¸¡é¥­ Claypot Chicken Rice","æµ·å—é¸¡é¥­ Hainanese Chicken Rice","å’–å–±é¢ Curry Mee","å»æ²™ Laksa","æ¿é¢ Pan Mee",
  "é±¼å¤´ç±³ç²‰ Fish Head Bee Hoon","è‚‰éª¨èŒ¶ Bak Kut Teh","è€é¼ ç²‰ Lou Shu Fan","ç»æµé¥­ Economy Rice","å¤è‚‰é¥­ Braised Pork Rice",
  "æ¸¯å¼çƒ§é¸­é¥­ Roast Duck Rice","å‰çƒ§é¥­ Char Siew Rice","çƒ§è‚‰é¥­ Crispy Pork Rice","ä¸‰æ‹¼çƒ§è…Šé¥­ Mixed Roast Rice","é¸¡é¥­ç²’ Chicken Rice Ball",
  "çš®è›‹ç˜¦è‚‰ç²¥ Century Egg Pork Porridge","è‰‡ä»”ç²¥ Boat Congee","é±¼ç‰‡ç²¥ Fish Porridge","æ½®å·ç²¥å¥—é¤ Teochew Porridge Set","æ¸¯å¼äº‘åé¢ HK Wantan Mee",
  "æ¸¯å¼çŒªæ‰’é¥­ Pork Chop Rice","æ¸¯å¼ç„—é¥­ Baked Rice","æ˜Ÿæ´²ç±³ç²‰ Singapore Bee Hoon","æœˆå…‰æ²³ Moonlight Hor Fun","å¹²ç‚’ç‰›æ²³ Beef Hor Fun",
  "å’¸é±¼é¸¡ç²’ç‚’é¥­ Salted Fish Fried Rice","æ‰¬å·ç‚’é¥­ Yangzhou Fried Rice","ç•ªèŒ„ç‚’é¥­ Tomato Fried Rice","ç‚’ä¼Šé¢ Fried Yee Mee","XOé…±ç‚’ç±³ç²‰ XO Fried Vermicelli",
  "é…±æ²¹é¸¡é¥­ Soy Sauce Chicken Rice","ä¸‰æ¯é¸¡é¥­ Three Cup Chicken Rice","å®«ä¿é¸¡ä¸é¥­ Kung Pao Chicken Rice","å§œè‘±é±¼ç‰‡é¥­ Ginger Fish Fillet Rice","é±¼é¦™èŒ„å­é¥­ Yu Xiang Eggplant Rice",
  "èŠ™è“‰è›‹é¥­ Fu Yong Egg with Rice","é“æ¿è±†è…é¥­ Hotplate Tofu Rice","å’¸è›‹è™¾é¥­ Salted Egg Prawn Rice","éº¦ç‰‡é¸¡é¥­ Cereal Chicken Rice","æ¤’ç›è‹ä¸œé¥­ Salt & Pepper Squid Rice",
  "å•¦å•¦ç‚’ç±³ç²‰ Lala Bee Hoon","å•¦å•¦æ±¤ç±³ç²‰ Lala Soup Bee Hoon","å§œè‘±ç”°é¸¡é¥­ Ginger Frog Rice","ç”°é¸¡ç²¥ Frog Porridge","æ²™ç…²è±†è…é¥­ Claypot Tofu Rice",
  "è’œè“‰èŠ¥å…°é¥­ Garlic Kailan Rice","è’œé¦™æ’éª¨é¥­ Garlic Pork Ribs Rice","æ¢…èœæ‰£è‚‰é¥­ Preserved Veg Pork Rice","å’¸é±¼èŠ±è…©ç…²é¥­ Salted Fish Pork Belly Rice","æ‹›ç‰Œç‚’é¥­ Signature Fried Rice",
  "Mee Goreng Mamak é©¬æ¥ç‚’é¢","Nasi Lemak æ¤°æµ†é¥­","Nasi Goreng ç‚’é¥­","Nasi Goreng Kampung é£å‘³ç‚’é¥­","Nasi Goreng Pattaya åŒ…è›‹ç‚’é¥­",
  "Nasi Kandar æ‰æ‹…é¥­","Nasi Tomato ç•ªèŒ„é¥­","Nasi Dagang ç™»å˜‰æ¥¼é¥­","Nasi Kerabu è“èŠ±é¥­","Nasi Arab/Bukhari é˜¿æ‹‰ä¼¯é¥­",
  "Beef Rendang ä»å½“ç‰›è‚‰","Ayam Percik çƒ¤é¸¡é¥­","Ayam Masak Merah çº¢é…±é¸¡é¥­","Sambal Sotong å‚å³‡é±¿é±¼é¥­","Sambal Udang å‚å³‡è™¾é¥­",
  "Satay æ²™çˆ¹","Satay Kajang åŠ å½±æ²™çˆ¹","Ikan Bakar çƒ¤é­”é¬¼é±¼","Sup Kambing ç¾Šè‚‰æ±¤é¥­","Sup Ekor ç‰›å°¾æ±¤é¥­",
  "Sup Tulang éª¨æ±¤é¥­","Kari Kepala Ikan å’–å–±é±¼å¤´é¥­","Mee Rebus å¤é¢","Mee Jawa çˆªå“‡é¢","Mee Soto å°å°¼é¸¡æ±¤é¢",
  "Mee Kari å’–å–±é¢","Mee Siam æš¹ç½—ç±³ç²‰","Mee Hailam é©¬æ¥ç‚’é¢","Mee Bandung éº»å¡é¢","Laksa Johor æŸ”ä½›å»æ²™",
  "Laksa Kedah å‰æ‰“å»æ²™","Laksa Kelantan å‰å…°ä¸¹å»æ²™","Assam Laksa äºšå‚å»æ²™","Maggi Goreng ç‚’ Maggi","Maggi Sup æ±¤ Maggi",
  "Maggi Kari å’–å–± Maggi","Roti Canai å°åº¦ç…é¥¼","Roti Tisu é£é¥¼","Roti Telur é¸¡è›‹é¥¼","Roti Sardin æ²™ä¸é±¼é¥¼",
  "Roti Planta ç‰›æ²¹é¥¼","Murtabak Ayam é¸¡è‚‰é¦…é¥¼","Murtabak Daging ç‰›è‚‰é¦…é¥¼","Teh Tarik Roti Set æ‹‰èŒ¶é…é¥¼å¥—é¤","Tandoori Chicken ç‚­ç‚‰çƒ¤é¸¡",
  "Naan Set çƒ¤é¥¼å¥—é¤","Briyani é¦™æ–™é¥­","Lontong ç±³ç³•æ±¤","Soto Ayam é¸¡æ±¤é¥­","Ayam Goreng Kampung ç”˜æ¦œç‚¸é¸¡é¥­",
  "Kangkung Belacan å‚å³‡ç©ºå¿ƒèœé¥­","Otak-otak ä¹Œè¾¾","Rojak ç½—æƒ¹","Cendol ç…è•Š","ABC çº¢è±†å†°",
  "Pisang Goreng ç‚¸é¦™è•‰","Kaya Toast å’–æ¤°é¢åŒ…","Soft-boiled Eggs åŠç”Ÿç†Ÿè›‹","Kuih Lapis åƒå±‚ç³•","Ondeh-ondeh æ¤°ä¸çƒ",

  // â€”â€” å¤–å›½ç¾é£Ÿ 30% (çº¦ 60 é“) â€”â€”
  // éŸ©é¤
  "Bibimbap çŸ³é”…æ‹Œé¥­","Kimchi Fried Rice æ³¡èœç‚’é¥­","Army Stew éƒ¨é˜Ÿé”…","Samgyeopsal with Rice éŸ©å¼çƒ¤äº”èŠ±é¥­","Bulgogi Beef Rice éŸ©å¼çƒ¤ç‰›è‚‰é¥­",
  "Tteokbokki è¾£ç‚’å¹´ç³•","Kimchi Jjigae æ³¡èœé”…","Doenjang Jjigae å¤§é…±æ±¤","Sundubu Jjigae å«©è±†è…é”…","Korean Fried Chicken éŸ©å¼ç‚¸é¸¡",
  // æ—¥é¤
  "Ramen æ‹‰é¢","Udon ä¹Œå†¬é¢","Soba èéº¦é¢","Japanese Curry Rice æ—¥å¼å’–å–±é¥­","Unagi Don é³—é±¼é¥­",
  "Oyakodon äº²å­ä¸¼","Gyudon ç‰›ä¸¼","Katsudon ç‚¸çŒªæ’é¥­","Chashu Ramen å‰çƒ§æ‹‰é¢","Miso Ramen å‘³å™Œæ‹‰é¢",
  "Tonkotsu Ramen è±šéª¨æ‹‰é¢","Okonomiyaki å¤§é˜ªçƒ§","Takoyaki ç« é±¼çƒ§","Yakisoba æ—¥å¼ç‚’é¢","Salmon Sashimi ä¸‰æ–‡é±¼åˆºèº«","Sushi å¯¿å¸"
  // æ³°é¤
  "Pad Thai æ³°å¼ç‚’ç²‰","Tom Yum Fried Rice ä¸œç‚ç‚’é¥­","Thai Basil Chicken Rice æ‰“æŠ›é¸¡é¥­","Thai Pork Leg Rice çŒªè„šé¥­","Thai Green Curry with Rice ç»¿å’–å–±é¥­",
  "Thai Red Curry with Rice çº¢å’–å–±é¥­","Thai Yellow Curry with Rice é»„å’–å–±é¥­","Thai Fried Chicken æ³°å¼ç‚¸é¸¡","Thai Boat Noodles æ²³ç²‰","Thai Omelette Rice æ³°å¼è›‹åŒ…é¥­",
  // è¥¿é¤
  "Pizza æŠ«è¨","Burger æ±‰å ¡","Hotdog çƒ­ç‹—","Fish & Chips ç‚¸é±¼è–¯æ¡","Spaghetti Bolognese è‚‰é…±æ„é¢",
  "Carbonara å¥¶æ²¹åŸ¹æ ¹æ„é¢","Lasagna åƒå±‚é¢","Mac & Cheese èŠå£«é€šå¿ƒç²‰","Steak ç‰›æ’","Grilled Salmon çƒ¤ä¸‰æ–‡é±¼",
  "Lamb Chop ç¾Šæ’","Chicken Chop é¸¡æ’é¥­","Pork Chop çŒªæ’é¥­","Fried Chicken ç‚¸é¸¡å¥—é¤","Burrito å¢¨è¥¿å“¥å·é¥¼",
  "Taco å¡”å¯","Quesadilla å¢¨è¥¿å“¥çƒ¤é¥¼","Nachos ç‰ç±³ç‰‡","Shepherdâ€™s Pie ç‰§ç¾Šäººæ´¾","Cottage Pie ç‰›è‚‰æ´¾"
];

  const wheel = document.getElementById('wheel');
  const ctx = wheel.getContext('2d');
  const itemList = document.getElementById('itemList');
  const resultDom = document.getElementById('result');
  const spinBtn = document.getElementById('spinBtn');
  const refreshBtn = document.getElementById('refreshBtn');
  const confetti = document.getElementById('confetti');
  const cctx = confetti.getContext('2d');

  let pool = [...defaultPool];
  let items = pickRandom10(pool);
  let angle = 0; let spinning = false; let startAngle=0, targetAngle=0, startTime=0, duration=0;
  let lastTick = -1; let audioCtx = null; let confs = [];

  function pickRandom10(pool){ const arr=[...pool]; for(let i=arr.length-1;i>0;i--){ const j=(Math.random()*(i+1))|0; [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr.slice(0,10);} 

  function getIndex(){
    const n = items.length; const slice = Math.PI*2/n;
    const pointerAngle = -Math.PI/2; // 12ç‚¹æœä¸‹
    let rel = (pointerAngle - angle) % (Math.PI*2);
    if (rel < 0) rel += Math.PI*2;
    return Math.floor(rel / slice) % n;
  }

  function easeOutCubic(t){ return 1-Math.pow(1-t,3); }
  function playTick(){ try{ if(!audioCtx) audioCtx=new (window.AudioContext||window.webkitAudioContext)(); if(audioCtx.state==='suspended') audioCtx.resume(); const o=audioCtx.createOscillator(); const g=audioCtx.createGain(); o.type='square'; o.frequency.value=1000; g.gain.value=0.02; o.connect(g).connect(audioCtx.destination); o.start(); setTimeout(()=>o.stop(),40);}catch(e){} }

  function drawWheel(){
    const W=wheel.width, H=wheel.height; const cx=W/2, cy=H/2, r=Math.min(W,H)/2-12; ctx.clearRect(0,0,W,H);
    const n=items.length; const slice=Math.PI*2/Math.max(n,1);
    for(let i=0;i<n;i++){
      const start=angle+i*slice, end=start+slice, mid=(start+end)/2; const hue=(i*360/n)|0; 
      const c1=`hsl(${hue} 80% 65%)`, c2=`hsl(${(hue+24)%360} 80% 55%)`; 
      const grad=ctx.createLinearGradient(cx+Math.cos(start)*r, cy+Math.sin(start)*r, cx, cy); grad.addColorStop(0,c1); grad.addColorStop(1,c2);
      ctx.beginPath(); ctx.moveTo(cx,cy); ctx.arc(cx,cy,r,start,end); ctx.closePath(); ctx.fillStyle=grad; ctx.fill(); ctx.strokeStyle='rgba(255,255,255,.5)'; ctx.lineWidth=1.2; ctx.stroke();
      ctx.save(); ctx.translate(cx+Math.cos(mid)*(r*0.72), cy+Math.sin(mid)*(r*0.72)); ctx.rotate(mid+Math.PI/2); ctx.fillStyle='#fff'; ctx.font='700 15px system-ui'; const label=items[i]; const txt=label.length>8?label.slice(0,8)+'â€¦':label; ctx.textAlign='center'; ctx.fillText(txt,0,5); ctx.restore();
    }
    ctx.beginPath(); ctx.arc(cx,cy,58,0,Math.PI*2); ctx.fillStyle='#ffffff'; ctx.fill(); ctx.strokeStyle='#e5e7eb'; ctx.lineWidth=3; ctx.stroke(); ctx.fillStyle='#111827'; ctx.font='700 16px system-ui'; ctx.textAlign='center'; ctx.fillText('ä»Šå¤©',cx,cy-4); ctx.fillStyle='#ef4444'; ctx.font='900 20px system-ui'; ctx.fillText('åƒå•¥',cx,cy+20);
  }

  function renderList(){ itemList.innerHTML=''; items.forEach(it=>{ const d=document.createElement('div'); d.className='tag'; d.textContent=it; itemList.appendChild(d); }); }

  function animate(){ if(!spinning) return; const t=Math.min((performance.now()-startTime)/duration,1); angle = startAngle + (targetAngle-startAngle)*easeOutCubic(t); const idx=getIndex(); if(idx!==lastTick){ lastTick=idx; playTick(); } drawWheel(); if(t<1){ requestAnimationFrame(animate); } else { spinning=false; finishSpin(); } }
  function spin(){ if(spinning||items.length===0) return; spinning=true; lastTick=-1; const extra=6+Math.random()*3; startAngle=angle; targetAngle=angle+extra*Math.PI*2+Math.random()*Math.PI*2; duration=2600+Math.random()*800; startTime=performance.now(); requestAnimationFrame(animate); }
  function finishSpin(){ const {label}=getResult(); resultDom.innerHTML = `ğŸ¯ å‘½è¿å®‰æ’ï¼š<b style=\"font-size:28px\">${label}</b>ï¼`; boomConfetti(); }
  function getResult(){ return { index:getIndex(), label: items[getIndex()] }; }

  function boomConfetti(){
    confetti.width = innerWidth; confetti.height = innerHeight;
    confs = new Array(160).fill(0).map(()=>({
      x: innerWidth/2 + (Math.random()-0.5)*200,
      y: innerHeight/3 + (Math.random()-0.5)*120,
      r: 2 + Math.random()*3,
      vx: (Math.random()-0.5)*6,
      vy: -Math.random()*7,
      g: 0.18 + Math.random()*0.22,
      life: 60 + (Math.random()*60|0),
      color: `hsl(${(Math.random()*360)|0} 80% 60%)`
    }));
    drawConfetti();
  }
  function drawConfetti(){
    cctx.clearRect(0,0,confetti.width,confetti.height);
    confs.forEach(p=>{ cctx.beginPath(); cctx.arc(p.x,p.y,p.r,0,Math.PI*2); cctx.fillStyle=p.color; cctx.fill(); p.x+=p.vx; p.y+=p.vy; p.vy+=p.g; p.life--; });
    confs = confs.filter(p=> p.y < confetti.height+10 && p.life>0 );
    if(confs.length) requestAnimationFrame(drawConfetti);
  }
  addEventListener('resize',()=>{ confetti.width=innerWidth; confetti.height=innerHeight; });

  spinBtn.addEventListener('click', spin);
  refreshBtn.addEventListener('click', ()=>{ items=pickRandom10(pool); drawWheel(); renderList(); resultDom.textContent='å·²æ¢ä¸€æ‰¹ï¼ç‚¹å¼€å§‹è½¬ï½'; });

  drawWheel(); renderList();
</script>
</body>
</html>
